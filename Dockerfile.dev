# =========================
# file: Dockerfile.dev
# =========================
# Development Dockerfile: live-reload via Flask CLI, bind-mount your source.
FROM python:3.12-slim

ENV PYTHONDONTWRITEBYTECODE=1 \
    PYTHONUNBUFFERED=1 \
    PIP_DISABLE_PIP_VERSION_CHECK=1 \
    FLASK_DEBUG=1 \
    DATA_FILE=/data/data.json

WORKDIR /app

# Install deps separately for better caching
COPY requirements.txt /app/requirements.txt
RUN pip install --no-cache-dir -r requirements.txt

# Copy app (you will also bind-mount in docker run for live editing)
COPY app.py /app/app.py

EXPOSE 8000
VOLUME ["/data"]

# Use Flask's dev server with reloader
CMD ["flask", "--app", "app.py", "run", "--host", "0.0.0.0", "--port", "8000"]
